---
import AuthLayout from "@/layouts/AuthLayout.astro";
import { UpdatePasswordForm } from "@/components/features/auth/UpdatePasswordForm";

const { user } = Astro.locals;

// If user is not logged in, they shouldn't be here (session should be established by auth callback)
if (!user) {
  return Astro.redirect("/login?error=Twoja sesja wygasła lub link jest nieprawidłowy. Spróbuj ponownie.");
}

export const prerender = false;
---

<AuthLayout title="Aktualizacja hasła">
  <UpdatePasswordForm client:load />
</AuthLayout>
